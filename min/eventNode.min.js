function eventNode(){function t(t){var e={};return t&&"[object Function]"===e.toString.call(t)}function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function n(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function r(t){for(var e=t.getIdentifier(),n=0;n<h.length;n++)if(h[n].getIdentifier()===e)return n}function i(t){for(var e=t.concat(),n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)e[n].getIdentifier()===e[r].getIdentifier()&&e.splice(r--,1);return e}var o=[],s={},h=[],f=n();this.getNetworkNodes=function(t){for(var e=t||[],n=e.length-1;n>=0;n--){var r=e[n];if(r.getIdentifier()===this.getIdentifier())return e}if(e.push(this),h.length)for(var o=0;o<h.length;o++){var r=h[o],s=r.getNetworkNodes(e);s&&s.length&&(e=i(s.concat(e)))}return e},this.getNetworkIdentifiers=function(){for(var t=this.getNetworkNodes(),e=[],n=t.length-1;n>=0;n--)e.push(t[n].getIdentifier());return e},this.getIdentifier=function(){return f},this.hasEvent=function(t){return t&&-1!==o.indexOf(t)&&s[t]?!0:!1},this.networkHasEvent=function(t){for(var e=this.getNetworkNodes(),n=e.length-1;n>=0;n--){var r=e[n];if(r.hasEvent(t))return!0}return!1},this.hasEventListener=function(e,n){return this.hasEvent(e)&&t(n)&&-1!==s[e].indexOf(n)},this.networkHasEventListener=function(t,e){for(var n=this.getNetworkNodes(),r=n.length-1;r>=0;r--){var i=n[r];if(i.hasEventListener(t,e))return!0}return!1},this.hasNode=function(t){for(var e=t.getIdentifier(),n=0;n<h.length;n++)if(h[n].getIdentifier()==e)return!0;return!1},this.addEvent=function(t){return this.hasEvent(t)?!1:(o.push(t),s[t]=[],!0)},this.addEventListener=function(e,n){return this.networkHasEvent(e)&&t(n)?(this.hasEvent(e)||this.addEvent(e),s[e].push(n),!0):!1},this.removeEventListener=function(t,e){return this.hasEventListener(e)?s.splice(s[t].indexOf(e),1):!1},this.connectNode=function(t){return this.hasNode(t)||t.getIdentifier()==this.getIdentifier()?!1:(h.push(t),t.connectNode(this),!0)},this.disconnectNode=function(t){return this.hasNode(t)?(h.splice(r(t),1),t.disconnectNode(this),!0):!1},this.triggerEvent=function(t,e){var n=e||[];if(-1===n.indexOf(f)){if(n.push(f),this.hasEvent(t))for(var r=s[t],i=0;i<r.length;i++)try{r[i]()}catch(o){}if(h.length)for(var u=0;u<h.length;u++){var c=h[u];c.triggerEvent(t,n)}}}}function eventNetwork(){networks=[],nodes=[],this.addNode=function(){},this.removeNode=function(){},this.connectToNetwork=function(){},this.disconnectNetwork=function(){}}